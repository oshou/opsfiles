#!/bin/bash

# Define
export OS_FLAG=`cat /etc/redhat-release | sed -e 's/.*\s\([0-9]\)\..*/\1/'`

# collect system summary
uname -a
cat /etc/redhat-release
cat /proc/cpuinfo | grep "processor" | wc -l
free -m | awk '{print $2}' | sed -n 2p
df -Th

# collect system summary
date
hostname
echo "[cpu]============================================================================================================"
lscpu
cat /proc/cpuinfo
echo "[mem]============================================================================================================"
free -m
cat /proc/meminfo | grep -e "MemTotal" -e "MemFree" -e "Buffers" -e "Cached" -e "SwapTotal" -e "SwapFree" -e "Slab"
echo "[partition]======================================================================================================"
fdisk -l
echo "[filesystem]====================================================================================================="
df -Th
echo "[OS-kernel]======================================================================================================"
uname -a
echo "[OS-release]====================================================================================================="
cat /etc/redhat-release
echo "[locale]========================================================================================================="
if ($OS_FLAG == '7'); then
  cat /etc/locale.conf
else
  cat /etc/sysconfig/i18n
fi
echo "[auth(su)]======================================================================================================="
cat /etc/pam.d/su
echo "[auth(sudo)]====================================================================================================="
cat /etc/sudoers
cat /etc/sudoers.d/*
echo "[groups]========================================================================================================="
cat /etc/group
echo "[users]=========================================================================================================="
cat /etc/passwd
echo "[selinux]========================================================================================================"
getenforce
echo "[network(ip-interface)]=========================================================================================="
ip a
echo "[network(routing-table)]========================================================================================="
netstat -rn
echo "[network(access-port)]==========================================================================================="
netstat -pantu
echo "[resolver(priority)]============================================================================================="
cat /etc/nsswitch.conf | grep "hosts: "
echo "[resolver(hosts)]================================================================================================"
cat /etc/hosts
echo "[resolver(dns resolver)]========================================================================================="
cat /etc/resolv.conf
echo "[yum-repository]================================================================================================="
ls -la /etc/yum.repos.d
echo "[packages(yum)]=================================================================================================="
yum list installed
echo "[packages(rpm)]=================================================================================================="
rpm -qa
echo "[services]======================================================================================================="
if ($OS_FLAG == '7'); then
  systemctl list-unit-files -t service
else
  chkconfig --list
fi
echo "[sshd]==========================================================================================================="
cat /etc/ssh/sshd_config
echo "[process]========================================================================================================"
ps auxf
echo "[iptables]======================================================================================================="
iptables -L -v -n --line-number
echo "[cron]==========================================================================================================="
cat /var/spool/cron/*
echo "[logrotate]======================================================================================================"
cat /etc/logrotate.conf
echo "[ntp]============================================================================================================"
ntpq -p
cat /etc/ntp.conf
echo "[kernel-params]=================================================================================================="
sysctl -a
